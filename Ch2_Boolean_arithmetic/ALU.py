from adders import *



def ALU_nostat( x16, y16, zx, nx, zy, ny, f, no ):

    # would be better if didn't use hard coded arrays

    return (
        MUX16(
            MUX16(
                AND16(
                    MUX4WAY16( x16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(x16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [nx,zx] )
                    ,
                    MUX4WAY16( y16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(y16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [ny,zy] )
                )
                ,
                Add16(
                    MUX4WAY16( x16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(x16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [nx,zx] )
                    ,
                    MUX4WAY16( y16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(y16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [ny,zy] )
                )
                ,
                f
            )
            ,

            NOT16(
                MUX16(
                    AND16(
                        MUX4WAY16( x16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(x16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [nx,zx] )
                        ,
                        MUX4WAY16( y16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(y16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [ny,zy] )
                    )
                    ,
                    Add16(
                        MUX4WAY16( x16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(x16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [nx,zx] )
                        ,
                        MUX4WAY16( y16, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],  NOT16(y16), [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [ny,zy] )
                    )
                    ,
                    f
                )
            )
            ,
            no
        )
    )



def ALU( x16, y16, zx, nx, zy, ny, f, no ):
    return (
        ALU_nostat( x16, y16, zx, nx, zy, ny, f, no ),
        NOR(
            OR8WAY( ALU_nostat( x16, y16, zx, nx, zy, ny, f, no )[:8] ) ,
            OR8WAY( ALU_nostat( x16, y16, zx, nx, zy, ny, f, no )[8:] )
            ),
        ALU_nostat( x16, y16, zx, nx, zy, ny, f, no )[0]
        )
